---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'



# Code Block

```rust
// 函数的参数类型从 String 变成了 &String
// 这表示它“借用”一个 String，而不是获取其所有权
fn calculate_length(s: &String) -> usize {
    s.len()
}

fn main() {
    let s1 = String::from("hello");
    
    // 我们传递的是 s1 的引用，而不是 s1 本身
    let length = calculate_length(&s1); 
    
    // 好极了！s1 在这里依然是有效的，因为所有权从未离开过 main 函数
    println!("The length of '{}' is {}.", s1, length);
}
```


# 借用

```rust
// 函数的参数类型从 String 变成了 &String
// 这表示它“借用”一个 String，而不是获取其所有权
fn calculate_length(s: &String) -> usize {
    s.len()
}

fn main() {
    let s1 = String::from("hello");
    
    // 我们传递的是 s1 的引用，而不是 s1 本身
    let length = calculate_length(&s1); 
    
    // 好极了！s1 在这里依然是有效的，因为所有权从未离开过 main 函数
    println!("The length of '{}' is {}.", s1, length);
}
```


# 可变引用

```rust
// 参数类型是 &mut String，表示“我需要一个可变的借用”
fn add_suffix(s: &mut String) {
    s.push_str("_verified"); // .push_str() 可以修改字符串
}

fn main() {
    // 1. 注意！要让一个值可以被修改，它本身必须被声明为 mut
    let mut username = String::from("new_user"); 
    
    println!("修改前: {}", username);

    // 2. 传递一个可变引用给函数
    add_suffix(&mut username);

    println!("修改后: {}", username);
}
```

# Excalidraw Data

## Text Elements
解决 [[rust_所有权转移_20250930084008.excalidraw]] 的痛点，传给一个函数后，它的所有权就转移了，原来的变量就作废了 ^7zSe5cvW

& 引用允许你在不转移所有权的情况下，让代码的其他部分“借用”这个值 ^iFOa15x3

默认借用是不可变的，需要加上 mut转换为可变引用 ^noOrIMrk

任意数量的不可变引用 (&T) ^3IX9h8Vh

借用规则：在任何给定的[[rust_作用域_20250930085805.excalidraw]]内，对于一个变量，你只能拥有以下两者之一 ^o7oYkTKS

一个且仅有一个可变引用 (&mut T) ^TaE482z1

## Element Links
RRpPWhtk: [[rust_借用与引用_20250930084135.excalidraw.md#借用]]

WS0fW4yW: [[rust_借用与引用_20250930084135.excalidraw.md#可变引用]]

%%
## Drawing
```compressed-json
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=
```
%%